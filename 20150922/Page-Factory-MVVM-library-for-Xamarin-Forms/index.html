
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Daniel Luberda">
    <title>Page Factory MVVM library for Xamarin.Forms - Daniel Luberda</title>
    <meta name="author" content="Daniel Luberda">
    
    
        <link rel="alternative" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <meta name="description" content="Ξ Page Factory MVVM library for Xamarin.Forms
The main reason for making PageFactory was that I needed a very simple to use MVVM library which would free me from implementing the same things for any X">
<meta property="og:type" content="blog">
<meta property="og:title" content="Page Factory MVVM library for Xamarin.Forms">
<meta property="og:url" content="http://daniel-luberda.github.io/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/index.html">
<meta property="og:site_name" content="Daniel Luberda">
<meta property="og:description" content="Ξ Page Factory MVVM library for Xamarin.Forms
The main reason for making PageFactory was that I needed a very simple to use MVVM library which would free me from implementing the same things for any X">
<meta property="og:image" content="http://daniel-luberda.github.io/hello-world.png">
<meta property="og:image" content="http://daniel-luberda.github.io/example-screenshoot.png">
<meta property="og:updated_time" content="2015-09-25T20:32:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Page Factory MVVM library for Xamarin.Forms">
<meta name="twitter:description" content="Ξ Page Factory MVVM library for Xamarin.Forms
The main reason for making PageFactory was that I needed a very simple to use MVVM library which would free me from implementing the same things for any X">
    
    
    
        <meta property="og:image" content="/assets/images/avatar.png"/>
    
    
        <meta property="og:image" content="/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/thumbnail.png"/>
        <meta class="swiftype" name="image" data-type="enum" content="http://daniel-luberda.github.io/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/thumbnail.png" />
    
    
        <meta property="og:image" content="/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/cover.png"/>
        <meta class="swiftype" name="image" data-type="enum" content="http://daniel-luberda.github.io/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/cover.png" />
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style.min.css" type="text/css">
    <!--STYLES END-->
    
</head>

    <body>
        <div id="blog">
            <header id="header" data-behavior="3">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <h1 class="header-title">
        <a class="header-title-link" href="/ ">Daniel Luberda</a>
    </h1>
    
        <a class="header-right-picture" href="/#about">
            <img class="header-picture" src="/assets/images/avatar.png"/>
        </a>
    
</header>
            <nav id="sidebar" data-behavior="3">
    
        <div class="sidebar-profile">
            <a href="/#about">
                
                    <img class="sidebar-profile-picture" src="/assets/images/avatar.png"/>
                
            </a>
            <span class="sidebar-profile-name">Daniel Luberda</span>
        </div>
    
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/ "
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-home"></i>
                    <span class="sidebar-button-desc">Home</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-categories"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
                    <span class="sidebar-button-desc">Categories</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-tags"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
                    <span class="sidebar-button-desc">Tags</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/all-archives"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
                    <span class="sidebar-button-desc">Archive</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link st-search-show-outputs"
                         href="/#search"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-search"></i>
                    <span class="sidebar-button-desc">Search</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/#about"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-question"></i>
                    <span class="sidebar-button-desc">About</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://github.com/daniel-luberda" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-github"></i>
                    <span class="sidebar-button-desc">GitHub</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="http://stackoverflow.com/users/5064986/daniel-luberda" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-stack-overflow"></i>
                    <span class="sidebar-button-desc">Stack Overflow</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://linkedin.com/pub/daniel-luberda/92/944/697" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-linkedin"></i>
                    <span class="sidebar-button-desc">Linked In</span>
                </a>
        </li>
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link " href="https://twitter.com/daniel_luberda" target="_blank">
                
                    <i class="sidebar-button-icon fa fa-lg fa-twitter"></i>
                    <span class="sidebar-button-desc">Twitter</span>
                </a>
        </li>
        
    </ul>
    
        <ul class="sidebar-buttons">
        
            <li class="sidebar-button">
                
                    <a  class="sidebar-button-link "
                         href="/atom.xml"
                        
                    >
                
                    <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
                    <span class="sidebar-button-desc">RSS</span>
                </a>
        </li>
        
    </ul>
    
</nav>

            
        <div class="post-header-cover
                    text-center
                    post-header-cover--partial"
             style="background-image:url('/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/cover.png');"
             data-behavior="3">
            
                <div class="post-header main-content-wrap text-center">
    
        <h1 class="post-title" itemprop="headline">
            Page Factory MVVM library for Xamarin.Forms
        </h1>
    
    <div class="post-meta">
    <time itemprop="datePublished" content="Tue Sep 22 2015 16:13:07 GMT+0200">
	
		    Sep 22, 2015
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/PageFactory/">PageFactory</a>, <a class="category-link" href="/categories/PageFactory/Xamarin-Forms/">Xamarin.Forms</a>


    
</div>
</div>
            
        </div>

            <div id="main" data-behavior="3"
                 class="hasCover
                        hasCoverMetaIn
                        ">
                
<article class="post" itemscope itemType="http://schema.org/BlogPosting">
    
    
    <div class="post-content markdown" itemprop="articleBody">
        <div class="main-content-wrap">
            <h1 id="page-factory-mvvm-library-for-xamarin-forms"><a class="header-anchor" href="#page-factory-mvvm-library-for-xamarin-forms">Ξ </a>Page Factory MVVM library for Xamarin.Forms</h1>
<p>The main reason for making PageFactory was that I needed a very simple to use MVVM library which would free me from implementing the same things for any Xamarin.Forms project I created all over again. Those things were Page Caching, ViewModel oriented Navigation, INotifyPropertyChanged and ICommand implementations, Messaging between Pages and ViewModels. I also wanted my ViewModels to be dependency free (not forcing any concrete class inheritance).</p>
<p>That’s it. It’s very simple, no dependency injections, no platform specific code - just plain PCL. What comes with it, it’s very very lightweight. Here’s a blog note about it.</p>
<h2 id="table-of-contents"><a class="header-anchor" href="#table-of-contents">Ξ </a>Table of contents</h2>
<ol>
<li><a href="#minimal-code-to-get-it-working">Minimal code to get it working</a></li>
<li><a href="#pagefactory-basics">PageFactory Basics</a></li>
<li><a href="#pagefactory-messaging">PageFactory Messaging</a></li>
<li><a href="#pagefactory-navigation">PageFactory Navigation</a></li>
<li><a href="#pagefactory-inotifypropertychanged-implementation">PageFactory INotifyPropertyChanged implementation</a></li>
<li><a href="#pagefactory-icommand-implementation">PageFactory ICommand implementation</a></li>
<li><a href="#example-showing-basic-features">Example showing basic features</a></li>
<li><a href="#summary">Summary</a></li>
</ol>
<h2 id="minimal-code-to-get-it-working"><a class="header-anchor" href="#minimal-code-to-get-it-working">Ξ </a>Minimal code to get it working</h2>
<p>Install nuget package from: <a href="https://www.nuget.org/packages/DLToolkit.PageFactory.Forms/" target="_blank" rel="external">https://www.nuget.org/packages/DLToolkit.PageFactory.Forms/</a></p>
<h3 id="simple-helloworld-example"><a class="header-anchor" href="#simple-helloworld-example">Ξ </a>Simple “HelloWorld” example:</h3>
<figure class="highlight csharp"><figcaption><span>App.cs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">App</span> : Application</span><br><span class="line"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">App</span><span class="params">()</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pageFactory = <span class="keyword">new</span> <span class="function"><span class="title">XamarinFormsPageFactory</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="keyword">var</span> navigationPage = pageFactory.<span class="function"><span class="title">Init&lt;HelloViewModel, PFNavigationPage&gt;</span><span class="params">()</span></span>;</span><br><span class="line">    MainPage = navigationPage;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight csharp"><figcaption><span>HelloPage.cs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HelloPage</span> : PFContentPage&lt;HelloViewModel&gt;</span><br><span class="line"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">HelloPage</span><span class="params">()</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> label = <span class="keyword">new</span> <span class="function"><span class="title">Label</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      HorizontalOptions = LayoutOptions.CenterAndExpand,</span><br><span class="line">      VerticalOptions = LayoutOptions.CenterAndExpand,</span><br><span class="line">    &#125;;</span><br><span class="line">    label.<span class="function"><span class="title">SetBinding&lt;HelloViewModel&gt;</span><span class="params">(Label.TextProperty, v =&gt; v.HelloLabelText)</span></span>;</span><br><span class="line"></span><br><span class="line">    Content = label;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight csharp"><figcaption><span>HelloViewModel.cs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HelloViewModel</span> : BaseViewModel</span><br><span class="line"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">HelloViewModel</span><span class="params">()</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">    HelloLabelText = <span class="string">"Hello World"</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> <span class="title">HelloLabelText</span> &#123; </span><br><span class="line">    <span class="keyword">get</span> &#123; <span class="keyword">return</span> <span class="function"><span class="title">GetField&lt;string&gt;</span><span class="params">()</span></span>; &#125;</span><br><span class="line">    <span class="keyword">set</span> &#123; <span class="function"><span class="title">SetField</span><span class="params">(value)</span></span>; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>That’s all! You’ll have access to all PageFactory features!</strong></p>
<p align="center">
  <img src="hello-world.png" alt="Hello World">
</p>
<h1 id="pagefactory-basics"><a class="header-anchor" href="#pagefactory-basics">Ξ </a>PageFactory Basics</h1>
<h3 id="pages-and-viewmodels"><a class="header-anchor" href="#pages-and-viewmodels">Ξ </a>Pages and ViewModels</h3>
<p><code>PageFactory</code> uses <code>Pages</code> and <code>ViewModels</code>.</p>
<ul>
<li>Every <code>Page</code> implements <code>IBasePage&lt;INotifyPropertyChanged&gt;</code>, the generic argument is a <code>ViewModel</code> type</li>
<li>Every <code>ViewModel</code> must have a parameterless constructor and implement <code>INotifyPropertyChanged</code> (if only <code>Page</code> has to receive messages) or <code>IBaseMessagable</code> (if both <code>Page</code> and <code>ViewModel</code> have to receive messages). There are no other requirements.</li>
</ul>
<h4 id="pagefactory-helper-implementations"><a class="header-anchor" href="#pagefactory-helper-implementations">Ξ </a>PageFactory helper implementations</h4>
<ul>
<li><strong>BaseViewModel</strong> for ViewModels. It implements <code>INotifyPropertyChanged</code>, <code>IBaseMessagable</code>) and has PageFactory property which returns PF.Factory instance.</li>
<li><strong>BaseModel</strong> for Models.  It implements <code>INotifyPropertyChanged</code>.</li>
<li><strong>PageFactoryCommand, IPageFactoryCommand</strong> - PCL compatibile ICommand implementation.</li>
</ul>
<h4 id="pagefactory-factory-instance"><a class="header-anchor" href="#pagefactory-factory-instance">Ξ </a>PageFactory Factory instance</h4>
<p>You can get PageFactory instance:</p>
<ul>
<li>using <strong><code>PageFactory</code></strong> property in <code>Page</code> or <code>ViewModel</code> (if it inherits from <code>BaseViewModel</code>)</li>
<li>using static class property: <strong><code>PF.Factory</code></strong></li>
</ul>
<p>Some basic <code>PageFactory</code> methods you should know:</p>
<ul>
<li><strong><code>GetPageFromCache&lt;TViewModel&gt;()</code></strong> - Gets (or creates) cached Page instance.</li>
<li><strong><code>GetMessagablePageFromCache&lt;TViewModel&gt;()</code></strong> - Gets (or creates) cached Page instance with ViewModel messaging support.</li>
<li><strong><code>GetPageAsNewInstance&lt;TViewModel&gt;()</code></strong> - Creates a new Page Instance. New instance can replace existing cached Page instance (<code>bool saveOrReplaceInCache</code> argument).</li>
<li><strong><code>GetMessagablePageAsNewInstance&lt;TViewModel&gt;()</code></strong> - Creates a new Page Instance with ViewModel messaging support. New instance can replace existing cached Page instance (<code>bool saveOrReplaceInCache = false</code> method parameter).</li>
</ul>
<p>Cache can hold only one instance of ViewModel of the same type (with its Page). You can remove cache for a ViewModel type or replace it with another instance.</p>
<h4 id="fluent-methods"><a class="header-anchor" href="#fluent-methods">Ξ </a>Fluent methods</h4>
<p>ViewModels and Pages (<code>IBasePage&lt;INotifyPropertyChanged&gt;</code>) have some fluent style extensions. Instead:</p>
<figure class="highlight csharp"><figcaption><span>Factory instance methods</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> page = PageFactory.<span class="function"><span class="title">GetMessagablePageAsNewInstance&lt;HomeViewModel&gt;</span><span class="params">()</span></span>;</span><br><span class="line">PageFactory.<span class="function"><span class="title">ResetPageViewModel</span><span class="params">(page)</span></span>;</span><br><span class="line">PageFactory.<span class="function"><span class="title">SendMessageByPage</span><span class="params">(MessageConsumer.PageAndViewModel, page, <span class="string">"Message"</span>, this, <span class="string">"arg"</span>)</span></span>;</span><br><span class="line"><span class="keyword">await</span> PageFactory.<span class="function"><span class="title">PushPageAsync</span><span class="params">(page)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Called from a ViewModel: </span></span><br><span class="line"><span class="keyword">var</span> page = PageFactory.<span class="function"><span class="title">GetPageByViewModel</span><span class="params">(this)</span></span>;</span><br><span class="line">PageFactory.<span class="function"><span class="title">ReplacePageViewModel</span><span class="params">(page, new HomeViewModel()</span>)</span>;</span><br></pre></td></tr></table></figure>
<p>You can use fluent style (I personally prefer it that way):</p>
<figure class="highlight csharp"><figcaption><span>Fluent extensions</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PageFactory.<span class="function"><span class="title">GetMessagablePageAsNewInstance&lt;HomeViewModel&gt;</span><span class="params">()</span></span><br><span class="line">  .<span class="title">ResetViewModel</span><span class="params">()</span></span><br><span class="line">  .<span class="title">SendMessageToPageAndViewModel</span><span class="params">(<span class="string">"Message"</span>, this, <span class="string">"arg"</span>)</span></span><br><span class="line">  .<span class="title">PushPage</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Called from a ViewModel: </span></span><br><span class="line"><span class="keyword">this</span>.<span class="function"><span class="title">GetPage</span><span class="params">()</span>.<span class="title">ReplaceViewModel</span><span class="params">(new HomeViewModel()</span>)</span>;</span><br></pre></td></tr></table></figure>
<h1 id="pagefactory-messaging"><a class="header-anchor" href="#pagefactory-messaging">Ξ </a>PageFactory Messaging</h1>
<p>All PageFactory <code>Pages</code> have messaging enabled. If you also want <code>ViewModel</code> to receive messages it must implement <code>IBaseMessagable</code> interface (<code>BaseViewModel</code> does it).</p>
<h4 id="receiving-messages"><a class="header-anchor" href="#receiving-messages">Ξ </a>Receiving messages</h4>
<p>To receive messages just override <code>PageFactoryMessageReceived</code> method (either on Page or ViewModel):</p>
<figure class="highlight csharp"><figcaption><span>Receiving messages</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">override</span> <span class="function"><span class="keyword">void</span> <span class="title">PageFactoryMessageReceived</span><span class="params">(<span class="keyword">string</span> message, <span class="keyword">object</span> sender, <span class="keyword">object</span> arg)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">  Console.<span class="function"><span class="title">WriteLine</span><span class="params">(<span class="string">"HomeViewModel received &#123;0&#125; message from &#123;1&#125; with arg = &#123;2&#125;"</span>,  </span><br><span class="line">	  message, sender == null ? <span class="string">"null"</span> : sender.GetType()</span>.<span class="title">ToString</span><span class="params">()</span>, arg ?? "null")</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="sending-messages"><a class="header-anchor" href="#sending-messages">Ξ </a>Sending messages</h4>
<p>To send messages use:</p>
<ul>
<li>PageFactory static methods: <code>SendMessageByPage</code>, <code>SendMessageByViewModel</code>, <code>SendMessageToCached</code></li>
<li>Page extension methods: <code>SendMessageToPageAndViewModel</code>, <code>SendMessageToViewModel</code>, <code>SendMessageToPage</code></li>
</ul>
<figure class="highlight csharp"><figcaption><span>Sending messages (Fluent extensions)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PageFactory.<span class="function"><span class="title">GetMessagablePageAsNewInstance&lt;HomeViewModel&gt;</span><span class="params">()</span></span><br><span class="line">  .<span class="title">SendMessageToPageAndViewModel</span><span class="params">(<span class="string">"Message"</span>, this, <span class="string">"arg"</span>)</span></span><br><span class="line">  </span><br><span class="line">PageFactory.<span class="title">GetPageFromCache&lt;DetailsViewModel&gt;</span><span class="params">()</span></span><br><span class="line">	.<span class="title">SendMessageToPage</span><span class="params">(<span class="string">"Message"</span>, this, <span class="string">"arg"</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight csharp"><figcaption><span>Sending messages (Factory methods)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PageFactory.<span class="function"><span class="title">SendMessageToCached&lt;HomeViewModel&gt;</span><span class="params">(</span><br><span class="line">	MessageConsumer.PageAndViewModel, <span class="string">"Message"</span>, this, <span class="string">"arg"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> page = PageFactory.<span class="function"><span class="title">GetPageFromCache&lt;DetailsViewModel&gt;</span><span class="params">()</span></span>;</span><br><span class="line">PageFactory.<span class="function"><span class="title">SendMessageToPage</span><span class="params">(Pages, <span class="string">"Message"</span>, this, <span class="string">"arg"</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<h1 id="pagefactory-navigation"><a class="header-anchor" href="#pagefactory-navigation">Ξ </a>PageFactory Navigation</h1>
<h4 id="navigating"><a class="header-anchor" href="#navigating">Ξ </a>Navigating</h4>
<p>To navigate use this methods:</p>
<ul>
<li>PageFactory static methods: <code>PushPageAsync</code>, <code>PopPageAsync</code>, <code>InsertPageBefore</code>, <code>RemovePage</code>, <code>PopPagesToRootAsync</code>, <code>SetNewRootAndReset</code></li>
<li>Page extension methods: <code>PushPage</code>, <code>PopPage</code>, <code>InsertPageBefore</code>, <code>RemovePage</code>, <code>PopPagesToRoot</code>, <code>SetNewRootAndReset</code></li>
</ul>
<figure class="highlight csharp"><figcaption><span>Navigating (Fluent extensions)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> page = PageFactory.<span class="function"><span class="title">GetPageAsNewInstance&lt;DetailsPage&gt;</span><span class="params">()</span>.<span class="title">PushPage</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">await</span> Task.<span class="function"><span class="title">Delay</span><span class="params">(<span class="number">5000</span>)</span></span>;</span><br><span class="line">page.<span class="function"><span class="title">PopPage</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight csharp"><figcaption><span>Navigating (Factory methods)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> page = PageFactory.<span class="function"><span class="title">GetPageAsNewInstance&lt;DetailsPage&gt;</span><span class="params">()</span></span>;</span><br><span class="line"><span class="keyword">await</span> PageFactory.<span class="function"><span class="title">PushPageAsync</span><span class="params">(page)</span></span>;</span><br><span class="line"><span class="keyword">await</span> Task.<span class="function"><span class="title">Delay</span><span class="params">(<span class="number">5000</span>)</span></span>;</span><br><span class="line"><span class="keyword">await</span> PageFactory.<span class="function"><span class="title">PopPageAsync</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
<h4 id="navigation-interception"><a class="header-anchor" href="#navigation-interception">Ξ </a>Navigation interception</h4>
<p>You can intercept navigation. Just override one of this <code>Page</code> methods:</p>
<ul>
<li><code>PageFactoryPushed</code>, <code>PageFactoryPopped</code>, <code>PageFactoryRemoved</code>, <code>PageFactoryInserted</code> - called after successful navigation</li>
<li><code>PageFactoryPushing</code>, <code>PageFactoryPopping</code>, <code>PageFactoryRemoving</code>, <code>PageFactoryInserting</code> - called before navigation. If <code>false</code> is returned, navigation will be cancelled</li>
<li><code>PageFactoryRemovingFromCache</code> - called when the page is being removed from cache</li>
</ul>
<figure class="highlight csharp"><figcaption><span>Page Navigation override example</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">override</span> <span class="function"><span class="keyword">void</span> <span class="title">PageFactoryPopped</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	<span class="comment">// Removes Page instance from PageFactory cache (it will be no longer needed)</span></span><br><span class="line">	<span class="keyword">this</span>.<span class="function"><span class="title">RemovePageInstanceFromCache</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight csharp"><figcaption><span>Page Navigation interception example</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">override</span> <span class="function"><span class="keyword">bool</span> <span class="title">PageFactoryPushing</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">	<span class="comment">// Page cannot be pushed if SomeCheckIsValid condition isn't met!!!</span></span><br><span class="line">	<span class="function"><span class="title">if</span> <span class="params">(!SomeCheckIsValid)</span></span><br><span class="line">		return false</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="pagefactory-inotifypropertychanged-implementation"><a class="header-anchor" href="#pagefactory-inotifypropertychanged-implementation">Ξ </a>PageFactory INotifyPropertyChanged implementation</h1>
<p>Xamarin.Forms apps extensively use bindings. Because of that, every ViewModel should implement <code>INotifyPropertyChanged</code> interface. If you inherit from <code>BaseViewModel</code> class you can use its <code>INotifyPropertyChanged</code> implementation methods.</p>
<p>If you would like to use backing field:</p>
<figure class="highlight csharp"><figcaption><span>Using backing field</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">string</span> someExampleProperty;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">string</span> <span class="title">SomeExampleProperty</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">get</span> &#123; <span class="keyword">return</span> someExampleProperty; &#125;</span><br><span class="line">  <span class="keyword">set</span> &#123; <span class="function"><span class="title">SetField</span><span class="params">(<span class="keyword">ref</span> someExampleProperty, value)</span></span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If you don’t want to use backing field you can use (It will store field value in internal <code>Dictionary</code>):</p>
<figure class="highlight csharp"><figcaption><span>Storing field in internal Dictionary</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">string</span> <span class="title">SomeExampleProperty</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">get</span> &#123; <span class="keyword">return</span> <span class="function"><span class="title">GetField&lt;string&gt;</span><span class="params">()</span></span>; &#125;</span><br><span class="line">  <span class="keyword">set</span> &#123; <span class="function"><span class="title">SetField</span><span class="params">(value)</span></span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If you need to notify additional properties when your property changes, you can also do it with:</p>
<figure class="highlight csharp"><figcaption><span>Using backing field and notyfing another properties changed</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">string</span> someExampleProperty;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">string</span> <span class="title">SomeExampleProperty</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">get</span> &#123; <span class="keyword">return</span> someExampleProperty; &#125;</span><br><span class="line">  <span class="keyword">set</span> </span><br><span class="line">  &#123; </span><br><span class="line">    <span class="function"><span class="title">SetField</span><span class="params">(<span class="keyword">ref</span> someExampleProperty, value, ()</span> </span>=&gt; SomeExampleProperty, </span><br><span class="line">      () =&gt; AnotherProperty1, () =&gt; AnotherProperty2); </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>or (It will store field value in internal <code>Dictionary</code>):</p>
<figure class="highlight csharp"><figcaption><span>Storing field in internal Dictionary and notyfing another properties changed</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">string</span> <span class="title">SomeExampleProperty</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">get</span> &#123; <span class="keyword">return</span> <span class="function"><span class="title">GetField&lt;string&gt;</span><span class="params">()</span></span>; &#125;</span><br><span class="line">  <span class="keyword">set</span> </span><br><span class="line">  &#123; </span><br><span class="line">    <span class="function"><span class="title">SetField</span><span class="params">(value, ()</span> </span>=&gt; SomeExampleProperty, </span><br><span class="line">      () =&gt; AnotherProperty1, () =&gt; AnotherProperty2); </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>You can also use Fody INotifyPropertyChanged (<a href="https://github.com/Fody/PropertyChanged" target="_blank" rel="external">https://github.com/Fody/PropertyChanged</a>) and just write:</p>
<figure class="highlight csharp"><figcaption><span>Fody INotifyPropertyChanged</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">string</span> <span class="title">SomeExampleProperty</span> &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br></pre></td></tr></table></figure>
<p>Don’t forget to add “FodyWeavers.xml” file to you project (BuildAction set to Content):</p>
<figure class="highlight xml"><figcaption><span>FodyWeavers.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">Weavers</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">PropertyChanged</span>/&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="title">Weavers</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>And that’s it! Fody will auto-implement all INotifyPropertyChanged classes!</p>
<h1 id="pagefactory-icommand-implementation"><a class="header-anchor" href="#pagefactory-icommand-implementation">Ξ </a>PageFactory ICommand implementation</h1>
<figure class="highlight csharp"><figcaption><span>PageFactoryCommand Example</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">TestViewModel</span><span class="params">()</span></span><br><span class="line"></span>&#123;</span><br><span class="line">  TestWithoutParamCommand = <span class="keyword">new</span> <span class="function"><span class="title">PageFactoryCommand</span><span class="params">(()</span> </span>=&gt; &#123;</span><br><span class="line">    Console.<span class="function"><span class="title">WriteLine</span><span class="params">(<span class="string">"TestWithoutParamCommand executed"</span>)</span></span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  TestWithParamCommand = <span class="keyword">new</span> <span class="function"><span class="title">PageFactoryCommand&lt;string&gt;</span><span class="params">((param)</span> </span>=&gt; &#123;</span><br><span class="line">    Console.<span class="function"><span class="title">WriteLine</span><span class="params">(<span class="string">"TestWithParamCommand executed with param=&#123;0&#125;"</span>, param)</span></span>;</span><br><span class="line">  &#125;, (obj) =&gt; <span class="function"><span class="title">ShouldExecute</span><span class="params">(obj)</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">IPageFactoryCommand <span class="title">TestWithoutParamCommand</span> &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">IPageFactoryCommand <span class="title">TestWithParamCommand</span> &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">bool</span> <span class="title">ShouldExecute</span><span class="params">(<span class="keyword">string</span> obj)</span></span><br><span class="line"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> !<span class="keyword">string</span>.<span class="function"><span class="title">IsNullOrEmpty</span><span class="params">(obj)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Then you could use it (XAML example):</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">Button</span> <span class="attribute">Text</span>=<span class="value">"Execute TestWithoutParamCommand"</span></span><br><span class="line">    <span class="attribute">Command</span>=<span class="value">"&#123;Binding TestWithoutParamCommand&#125;"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>Output after button tap: <code>TestWithoutParamCommand executed</code> (will always execute)</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">Button</span> <span class="attribute">Text</span>=<span class="value">"Execute TestWithParamCommand"</span></span><br><span class="line">    <span class="attribute">Command</span>=<span class="value">"&#123;Binding TestWithParamCommand&#125;"</span></span><br><span class="line">    <span class="attribute">CommandParameter</span>=<span class="value">"someParameterValue"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>Output after button tap: <code>TestWithParamCommand executed with param=someParameterValue</code></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">Button</span> <span class="attribute">Text</span>=<span class="value">"Execute TestWithParamCommand"</span></span><br><span class="line">    <span class="attribute">Command</span>=<span class="value">"&#123;Binding TestWithParamCommand&#125;"</span></span><br><span class="line">    <span class="attribute">CommandParameter</span>=<span class="value">""</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>Output after button tap: Won’t execute</p>
<p>To notify command that CanExecute changed use PageFactory <code>RaiseCanExecuteChanged();</code> method.</p>
<h1 id="example-showing-basic-features"><a class="header-anchor" href="#example-showing-basic-features">Ξ </a>Example showing basic features</h1>
<h3 id="flow"><a class="header-anchor" href="#flow">Ξ </a>Flow:</h3>
<p>App starts up ➡ User taps &quot;<em>Open Details Page</em>&quot; button ➡ User taps &quot;<em>Lock access &amp; return to HomePage</em>&quot; button</p>
<p align="center">
  <img src="example-screenshoot.png" alt="Example">
</p>
<h3 id="details"><a class="header-anchor" href="#details">Ξ </a>Details:</h3>
<ol>
<li>App starts up</li>
</ol>
<ul>
<li>&quot;<em>Open Details Page</em>&quot; button is enabled</li>
<li>&quot;<em>DetailsPage is accessible</em>&quot; text is shown inside <code>HomePage</code></li>
</ul>
<ol start="2">
<li>User taps &quot;<em>Open Details Page</em>&quot; button</li>
</ol>
<ul>
<li><code>HomePage</code> is created and put into <code>PageFactory</code> cache</li>
<li><code>HomeViewModel</code> sends &quot;<em>WarningMessage</em>&quot; message to <code>DetailsViewModel</code> (with warning message <code>string</code> argument)</li>
<li><code>DetailsViewModel</code> receives and handles received message (sets text to &quot;<em>When you lock this page, you’ll not be able to open it again</em>&quot;)</li>
<li><code>DetailsPage</code> is pushed</li>
<li>Received &quot;<em>When you lock this page, you’ll not be able to open it again</em>&quot; text is shown inside <code>DetailsPage</code></li>
</ul>
<ol start="3">
<li>User taps &quot;<em>Lock access &amp; return to HomePage</em>&quot; button</li>
</ol>
<ul>
<li><code>DetailsViewModel</code>sends &quot;<em>DetailsPageAccess</em>&quot; message to <code>HomeViewModel</code> with <code>bool</code> argument set to <code>false</code></li>
<li><code>HomeViewModel</code> receives receives and handles received message (disables button command and sets text which is shown inside <code>HomePage</code>)</li>
<li><code>DetailsPage</code> is popped and forced to be removed from <code>PageFactory</code> cache</li>
<li>&quot;<em>DetailsPage is locked</em>&quot; text is shown inside <code>HomePage</code></li>
</ul>
<h3 id="code"><a class="header-anchor" href="#code">Ξ </a>Code:</h3>
<figure class="highlight csharp"><figcaption><span>HomeViewModel.cs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HomeViewModel</span> : BaseViewModel</span><br><span class="line"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">HomeViewModel</span><span class="params">()</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">    PageTitle = <span class="string">"HomePage"</span>;</span><br><span class="line">    HomeLabelText = <span class="string">"DetailsPage is accessible"</span>;</span><br><span class="line">    CanOpenDetailsPage = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    OpenDetailsPageCommand = <span class="keyword">new</span> <span class="function"><span class="title">PageFactoryCommand</span><span class="params">(()</span> </span>=&gt; &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> messageToSend = <span class="string">"When you lock this page, you'll not be able to open it again"</span>;</span><br><span class="line"></span><br><span class="line">      PageFactory.<span class="function"><span class="title">GetMessagablePageFromCache&lt;DetailsViewModel&gt;</span><span class="params">()</span></span><br><span class="line">        .<span class="title">ResetViewModel</span><span class="params">()</span></span><br><span class="line">        .<span class="title">SendMessageToViewModel</span><span class="params">(message: <span class="string">"WarningMessage"</span>, sender: this, arg: messageToSend)</span></span><br><span class="line">        .<span class="title">PushPage</span><span class="params">()</span></span>; </span><br><span class="line"></span><br><span class="line">    &#125;, () =&gt; CanOpenDetailsPage);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">override</span> <span class="function"><span class="keyword">void</span> <span class="title">PageFactoryMessageReceived</span><span class="params">(<span class="keyword">string</span> message, <span class="keyword">object</span> sender, <span class="keyword">object</span> arg)</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">if</span> <span class="params">(message == <span class="string">"DetailsPageAccess"</span>)</span> </span><br><span class="line">    </span>&#123;</span><br><span class="line">      CanOpenDetailsPage = (<span class="keyword">bool</span>)arg;</span><br><span class="line">      HomeLabelText = <span class="string">"DetailsPage is locked"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Console.<span class="function"><span class="title">WriteLine</span><span class="params">(<span class="string">"HomeViewModel received &#123;0&#125; message from &#123;1&#125; with arg = &#123;2&#125;"</span>,  </span><br><span class="line">      message, sender == null ? null : sender.GetType()</span>.<span class="title">ToString</span><span class="params">()</span>, arg ?? "null")</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> IPageFactoryCommand <span class="title">OpenDetailsPageCommand</span> &#123; <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">bool</span> <span class="title">CanOpenDetailsPage</span> &#123;</span><br><span class="line">    <span class="keyword">get</span> &#123; <span class="keyword">return</span> <span class="function"><span class="title">GetField&lt;bool&gt;</span><span class="params">()</span></span>; &#125;</span><br><span class="line">    <span class="keyword">set</span> </span><br><span class="line">    &#123; </span><br><span class="line">      <span class="function"><span class="title">if</span> <span class="params">(SetField(value)</span> &amp;&amp; OpenDetailsPageCommand !</span>= <span class="literal">null</span>)</span><br><span class="line">        OpenDetailsPageCommand.<span class="function"><span class="title">RaiseCanExecuteChanged</span><span class="params">()</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> <span class="title">HomeLabelText</span> &#123; </span><br><span class="line">    <span class="keyword">get</span> &#123; <span class="keyword">return</span> <span class="function"><span class="title">GetField&lt;string&gt;</span><span class="params">()</span></span>; &#125;</span><br><span class="line">    <span class="keyword">set</span> &#123; <span class="function"><span class="title">SetField</span><span class="params">(value)</span></span>; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> <span class="title">PageTitle</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">get</span> &#123; <span class="keyword">return</span> <span class="function"><span class="title">GetField&lt;string&gt;</span><span class="params">()</span></span>; &#125;</span><br><span class="line">    <span class="keyword">set</span> &#123; <span class="function"><span class="title">SetField</span><span class="params">(value)</span></span>; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight csharp"><figcaption><span>HomePage.cs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HomePage</span> : PFContentPage&lt;HomeViewModel&gt;</span><br><span class="line"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">HomePage</span><span class="params">()</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.<span class="function"><span class="title">SetBinding&lt;HomeViewModel&gt;</span><span class="params">(Page.TitleProperty, v =&gt; v.PageTitle)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> label = <span class="keyword">new</span> <span class="function"><span class="title">Label</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      HorizontalOptions = LayoutOptions.CenterAndExpand,</span><br><span class="line">      VerticalOptions = LayoutOptions.CenterAndExpand,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    label.<span class="function"><span class="title">SetBinding&lt;HomeViewModel&gt;</span><span class="params">(Label.TextProperty, v =&gt; v.HomeLabelText)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> button = <span class="keyword">new</span> <span class="function"><span class="title">Button</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      HorizontalOptions = LayoutOptions.FillAndExpand,</span><br><span class="line">      Text = <span class="string">"Open Details Page"</span></span><br><span class="line">    &#125;;</span><br><span class="line">        </span><br><span class="line">    button.<span class="function"><span class="title">SetBinding&lt;HomeViewModel&gt;</span><span class="params">(Button.CommandProperty, v =&gt; v.OpenDetailsPageCommand)</span></span>;</span><br><span class="line"></span><br><span class="line">    Content = <span class="keyword">new</span> StackLayout &#123; </span><br><span class="line">      Children = &#123;</span><br><span class="line">        label,</span><br><span class="line">        button</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight csharp"><figcaption><span>DetailsViewModel.cs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DetailsViewModel</span> : BaseViewModel</span><br><span class="line"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">DetailsViewModel</span><span class="params">()</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">    PageTitle = <span class="string">"DetailsPage"</span>;</span><br><span class="line"></span><br><span class="line">    PopDetailsPageCommand = <span class="keyword">new</span> <span class="function"><span class="title">PageFactoryCommand</span><span class="params">(()</span> </span>=&gt; &#123;</span><br><span class="line">      </span><br><span class="line">      PageFactory.<span class="function"><span class="title">GetMessagablePageFromCache&lt;HomeViewModel&gt;</span><span class="params">()</span></span><br><span class="line">        .<span class="title">SendMessageToViewModel</span><span class="params">(message: <span class="string">"DetailsPageAccess"</span>, sender: this, arg: false)</span></span>;</span><br><span class="line">      </span><br><span class="line">      <span class="keyword">this</span>.<span class="function"><span class="title">GetPage</span><span class="params">()</span>.<span class="title">PopPage</span><span class="params">()</span></span>;  </span><br><span class="line">    &#125;);  </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">override</span> <span class="function"><span class="keyword">void</span> <span class="title">PageFactoryMessageReceived</span><span class="params">(<span class="keyword">string</span> message, <span class="keyword">object</span> sender, <span class="keyword">object</span> arg)</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">    Console.<span class="function"><span class="title">WriteLine</span><span class="params">(<span class="string">"DetailsViewModel received &#123;0&#125; message from &#123;1&#125; with arg = &#123;2&#125;"</span>,  </span><br><span class="line">      message, sender == null ? null : sender.GetType()</span>.<span class="title">ToString</span><span class="params">()</span>, arg ?? "null")</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">if</span> <span class="params">(message == <span class="string">"WarningMessage"</span>)</span></span><br><span class="line">    </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> receivedMessage = (<span class="keyword">string</span>)arg;</span><br><span class="line">      DetailsLabelText = receivedMessage;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> IPageFactoryCommand <span class="title">PopDetailsPageCommand</span> &#123; <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> <span class="title">DetailsLabelText</span> &#123; </span><br><span class="line">    <span class="keyword">get</span> &#123; <span class="keyword">return</span> <span class="function"><span class="title">GetField&lt;string&gt;</span><span class="params">()</span></span>; &#125;</span><br><span class="line">    <span class="keyword">set</span> &#123; <span class="function"><span class="title">SetField</span><span class="params">(value)</span></span>; &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">string</span> <span class="title">PageTitle</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">get</span> &#123; <span class="keyword">return</span> <span class="function"><span class="title">GetField&lt;string&gt;</span><span class="params">()</span></span>; &#125;</span><br><span class="line">    <span class="keyword">set</span> &#123; <span class="function"><span class="title">SetField</span><span class="params">(value)</span></span>; &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight csharp"><figcaption><span>DetailsPage.cs</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DetailsPage</span> : PFContentPage&lt;DetailsViewModel&gt;</span><br><span class="line"></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">DetailsPage</span><span class="params">()</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.<span class="function"><span class="title">SetBinding&lt;DetailsViewModel&gt;</span><span class="params">(Page.TitleProperty, v =&gt; v.PageTitle)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> label = <span class="keyword">new</span> <span class="function"><span class="title">Label</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      HorizontalOptions = LayoutOptions.CenterAndExpand,</span><br><span class="line">      VerticalOptions = LayoutOptions.CenterAndExpand,</span><br><span class="line">    &#125;;</span><br><span class="line">    label.<span class="function"><span class="title">SetBinding&lt;DetailsViewModel&gt;</span><span class="params">(Label.TextProperty, v =&gt; v.DetailsLabelText)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> button = <span class="keyword">new</span> <span class="function"><span class="title">Button</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      HorizontalOptions = LayoutOptions.FillAndExpand,</span><br><span class="line">      Text = <span class="string">"Lock access &amp; return to HomePage"</span></span><br><span class="line">    &#125;;</span><br><span class="line">    button.<span class="function"><span class="title">SetBinding&lt;DetailsViewModel&gt;</span><span class="params">(Button.CommandProperty, v =&gt; v.PopDetailsPageCommand)</span></span>;</span><br><span class="line"></span><br><span class="line">    Content = <span class="keyword">new</span> StackLayout &#123; </span><br><span class="line">      Children = &#123;</span><br><span class="line">        label,</span><br><span class="line">        button</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">override</span> <span class="function"><span class="keyword">void</span> <span class="title">PageFactoryPopped</span><span class="params">()</span></span><br><span class="line">  </span>&#123;</span><br><span class="line">    <span class="comment">// Removes Page instance from PageFactory cache (it will be no longer needed)</span></span><br><span class="line">    <span class="keyword">this</span>.<span class="function"><span class="title">RemovePageInstanceFromCache</span><span class="params">()</span></span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="summary"><a class="header-anchor" href="#summary">Ξ </a>Summary</h1>
<p>That’s all for now. Feel free to test it out and notify me about any errors / your suggestions. Thanks!</p>

            
                

            
        </div>
    </div>
    <div class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/C/">C#</a> <a class="tag tag--primary tag--small t-link" href="/tags/Caching/">Caching</a> <a class="tag tag--primary tag--small t-link" href="/tags/DLToolkit/">DLToolkit</a> <a class="tag tag--primary tag--small t-link" href="/tags/DLToolkit-PageFactory/">DLToolkit.PageFactory</a> <a class="tag tag--primary tag--small t-link" href="/tags/ICommand/">ICommand</a> <a class="tag tag--primary tag--small t-link" href="/tags/INotifyPropertyChanged/">INotifyPropertyChanged</a> <a class="tag tag--primary tag--small t-link" href="/tags/MVVM/">MVVM</a> <a class="tag tag--primary tag--small t-link" href="/tags/Messaging/">Messaging</a> <a class="tag tag--primary tag--small t-link" href="/tags/Navigation/">Navigation</a> <a class="tag tag--primary tag--small t-link" href="/tags/PageFactory/">PageFactory</a> <a class="tag tag--primary tag--small t-link" href="/tags/PageFactoryCommand/">PageFactoryCommand</a> <a class="tag tag--primary tag--small t-link" href="/tags/ViewModel/">ViewModel</a> <a class="tag tag--primary tag--small t-link" href="/tags/Xamarin/">Xamarin</a> <a class="tag tag--primary tag--small t-link" href="/tags/Xamarin-Forms/">Xamarin.Forms</a>

            </div>
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/20150918/Welcome/" data-tooltip="Welcome">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://daniel-luberda.github.io/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://daniel-luberda.github.io/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://daniel-luberda.github.io/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


        
            <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2015 Daniel Luberda. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="3">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled">
                
                    <i class="fa fa-angle-left"></i>
                    <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                </a>
            </li>
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--default tooltip--top" href="/20150918/Welcome/" data-tooltip="Welcome">
                
                    <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                    <i class="fa fa-angle-right"></i>
                </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions"  href="#btn-open-shareoptions">
                <i class="fa fa-share-alt"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=http://daniel-luberda.github.io/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/">
                <i class="fa fa-google-plus"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://daniel-luberda.github.io/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/">
                <i class="fa fa-facebook-official"></i>
            </a>
        </li>
        <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=http://daniel-luberda.github.io/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/">
                <i class="fa fa-twitter"></i>
            </a>
        </li>
        
            <li class="post-action">
                <a class="post-action-btn btn btn--default" href="#disqus_thread">
                    <i class="fa fa-comment-o"></i>
                </a>
            </li>
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#">
            
                <i class="fa fa-list"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                <div id="share-options-bar" class="share-options-bar" data-behavior="3">
    <ul class="share-options">
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=http://daniel-luberda.github.io/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/">
                <i class="fa fa-google-plus"></i><span class="">Share on Google Plus</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=http://daniel-luberda.github.io/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/">
                <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
            </a>
        </li>
        <li class="share-option">
            <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=http://daniel-luberda.github.io/20150922/Page-Factory-MVVM-library-for-Xamarin-Forms/">
                <i class="fa fa-twitter"></i><span>Share on Twitter</span>
            </a>
        </li>
    </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
            
        </div>
        <div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-remove"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/avatar.png"/>
        
            <h4 id="about-card-name">Daniel Luberda</h4>
        
            <h5 id="about-card-bio"><p>I love to participate in interesting projects!</p>
</h5>
        
        
            <h5 id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Self-employed</p>

            </h5>
        
        
            <h5 id="about-card-location">
                <i class="fa fa-map-marker"></i>
                <br/>
                Poland
            </h5>
        
    </div>
</div>

        <div id="cover" style="background-image:url('http://res.cloudinary.com/dqeaiomo8/image/upload/v1442673299/background_dodrrx.png');"></div>
    </body>
    <!--SCRIPTS-->
<script src="/assets/js/script.min.js" type="text/javascript"></script>
<!--SCRIPTS END-->

    <script type="text/javascript">
        var disqus_shortname = 'dluberdablog';
        (function() {
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>



</html>
